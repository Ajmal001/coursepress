/*!  - v2.0.0
 * 
 * Copyright (c) 2016; * Licensed GPLv2+ */
var CoursePress=CoursePress||{};(function(e){CoursePress.Events=CoursePress.Events||_.extend({},Backbone.Events),CoursePress.editor=CoursePress.editor||{},void 0!==window.getUserSetting&&(CoursePress.editor.init_mode=window.getUserSetting("editor")),CoursePress.editor.create=function(t,i,s,n,r,o){if(void 0===o&&(o=400),void 0===tinyMCEPreInit)return!1;r=void 0===r?!0:!1,i=i.replace(/\#/g,"");var a=_coursepress._dummy_editor,u=a.match(/id="dummy_editor_id">(.*|\s)/)[1];a=a.replace(/dummy_editor_id/g,i),a=a.replace(u,n),a=a.replace(/dummy_editor_content/g,n),a=a.replace(/dummy_editor_name/g,s),a=a.replace(/rows="\d*"/g,'style="height: '+o+'px"'),a=a.replace(/<p>\s/g,""),r?e(t).append(a):e(t).replaceWith(a);var l=JSON.parse(JSON.stringify(tinyMCEPreInit.mceInit.dummy_editor_id));return void 0!==l&&(l.body_class=l.body_class.replace(/dummy_editor_id/g,i),l.selector=l.selector.replace(/dummy_editor_id/g,i),l.init_instance_callback="CoursePress.editor.on_init",l.cache_suffix="",l.setup=function(e){e.on("keyup",function(){CoursePress.Events.trigger("editor:keyup",e)})},e("textarea#"+i).on("keyup",function(){CoursePress.Events.trigger("editor:keyup",this)}),tinyMCE.init(l),tinyMCEPreInit.mceInit[i]=l),l=JSON.parse(JSON.stringify(tinyMCEPreInit.qtInit.dummy_editor_id)),void 0!==l&&(l.id=i,l=window.quicktags(l),tinyMCEPreInit.qtInit[i]=l),window.QTags._buttonsInit(),!0},CoursePress.editor.content=function(t,i){var s="get";return void 0!==i&&(s="set"),void 0===tinyMCE||"html"===window.getUserSetting("editor")?(t="html"===window.getUserSetting("editor")?"#"+t:t,"set"===s&&e(t).val(i.trim()),e(t).val()):("set"===s&&tinyMCE.get(t).setContent(i.trim()),tinyMCE.get(t).getContent())},CoursePress.editor.set_height=function(t,i){e("#wp-"+t+"-editor-container").removeAttr("rows"),e("#wp-"+t+"-wrap iframe").css("height",i+"px")},CoursePress.editor.on_init=function(t){var i=CoursePress.editor.init_mode,s="#"+t.id+"-html",n="#"+t.id+"-tmce",r="#wp-"+t.id+"-editor-tools .wp-editor-tabs";e(s).detach(),e(n).detach();var o='<button id="'+t.id+"-visual"+'" class="wp-switch-editor switch-tmce" type="button">'+_coursepress.editor_visual+"</button>",a='<button id="'+t.id+"-text"+'" class="wp-switch-editor switch-html" type="button">'+_coursepress.editor_text+"</button>";e(r).append('<button class="hidden"></button>'),e(r+' [class="hidden"]').on("click",function(e){e.preventDefault(),e.stopPropagation()}),e(r).append(o),e(r+" #"+t.id+"-visual").on("click",function(e){e.preventDefault(),e.stopPropagation(),window.switchEditors.go(t.id,"tmce")}),e(r).append(a),e(r+" #"+t.id+"-text").on("click",function(e){e.preventDefault(),e.stopPropagation(),window.switchEditors.go(t.id,"html")}),"html"===i&&e(r+" #"+t.id+"-text").click()},CoursePress.utility=CoursePress.utility||{},CoursePress.utility.merge_distinct=function(t,i){var s=t;return e.each(i,function(t,i){s[t]=e.isArray(i)&&e.isArray(s[t])?CoursePress.utility.merge_distinct(s[t],i):i}),s},CoursePress.utility.update_object_by_path=function(e,t,i){for(var s=t.split("/");s.length>1;){var n=s.shift();e[n]?e=e[n]:(e[n]={},e=e[n])}e[s.shift()]=i},CoursePress.utility.get_object_path=function(e,t,i,s){void 0===s&&(s="");for(var n=Object.keys(e);n.length>0;){var r=n.shift();if(_.isObject(e[r]))return s=0!==s.length?s+"/"+r:r,CoursePress.utility.get_object_path(e[r],t,i,s);if(r===t&&e[r]===i)return s+"/"+r}},CoursePress.utility.in_array=function(e,t){return t.indexOf(e)>-1},CoursePress.utility.is_valid_url=function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1?!0:!1},CoursePress.utility.valid_media_extension=function(t,i){i=e(i).hasClass("image_url")?"image_url":i,i=e(i).hasClass("audio_url")?"audio_url":i,i=e(i).hasClass("video_url")?"video_url":i;var s=t.split(".").pop(),n=_coursepress.allowed_audio_extensions,r=_coursepress.allowed_video_extensions,o=_coursepress.allowed_image_extensions;return"featured_url"===i&&(i="image_url"),"course_video_url"===i&&(i="video_url"),"audio_url"===i?CoursePress.utility.in_array(s,n)?!0:CoursePress.utility.is_valid_url(t)&&s.length>5?!0:t.length?!1:!0:"video_url"===i?CoursePress.utility.in_array(s,r)?!0:CoursePress.utility.is_valid_url(t)&&s.length>5?!0:t.length?!1:!0:"image_url"===i?CoursePress.utility.in_array(s,o)?!0:CoursePress.utility.is_valid_url(t)&&s.length>5?!0:t.length?!1:!0:_coursepress.allowed_extensions?CoursePress.utility.in_array(s,_coursepress.allowed_extensions)?!0:CoursePress.utility.is_valid_url(t)&&s.length>5?!0:t.length?!1:!0:void 0},CoursePress.utility.pad=function(e,t){for(var i=e+"";t>i.length;)i="0"+i;return i},CoursePress.utility.unserialize=function(e){function t(e,t,i,s){throw new r.window[e](t,i,s)}function i(e,i,s){for(var n=2,r=[],o=e.slice(i,i+1);o!==s;)n+i>e.length&&t("Error","Invalid"),r.push(o),o=e.slice(i+(n-1),i+n),n+=1;return[r.length,r.join("")]}function s(e,t,i){var s,n,r;for(r=[],s=0;i>s;s++)n=e.slice(t+(s-1),t+s),r.push(n),i-=o(n);return[r.length,r.join("")]}function n(e,r){var o,a,u,l,d,c,p,_,f,h,v,g,m,C,y,x,b,P,w=0,k=function(e){return e};switch(r||(r=0),o=e.slice(r,r+1).toLowerCase(),a=r+2,o){case"i":k=function(e){return parseInt(e,10)},f=i(e,a,";"),w=f[0],_=f[1],a+=w+1;break;case"b":k=function(e){return 0!==parseInt(e,10)},f=i(e,a,";"),w=f[0],_=f[1],a+=w+1;break;case"d":k=function(e){return parseFloat(e)},f=i(e,a,";"),w=f[0],_=f[1],a+=w+1;break;case"n":_=null;break;case"s":h=i(e,a,":"),w=h[0],v=h[1],a+=w+2,f=s(e,a+1,parseInt(v,10)),w=f[0],_=f[1],a+=w+2,w!==parseInt(v,10)&&w!==_.length&&t("SyntaxError","String length mismatch");break;case"a":for(_={},u=i(e,a,":"),w=u[0],l=u[1],a+=w+2,c=parseInt(l,10),d=!0,g=0;c>g;g++)C=n(e,a),y=C[1],m=C[2],a+=y,x=n(e,a),b=x[1],P=x[2],a+=b,m!==g&&(d=!1),_[m]=P;if(d){for(p=Array(c),g=0;c>g;g++)p[g]=_[g];_=p}a+=1;break;default:t("SyntaxError","Unknown / Unhandled data type(s): "+o)}return[o,a-r,k(_)]}var r=this,o=function(e){var t=e.charCodeAt(0);return 128>t?0:2048>t?1:2};return n(e+"",0)[2]},CoursePress.utility.hashcode=function(e){var t,i,s,n=0;if(!e.length)return n;for(t=0,s=e.length;s>t;t++)i=e.charCodeAt(t),n=(n<<5)-n+i,n|=0;return n},CoursePress.utility.md5=function(e){function t(e,t){return e<<t|e>>>32-t}function i(e,t){var i,s,n,r,o;return n=2147483648&e,r=2147483648&t,i=1073741824&e,s=1073741824&t,o=(1073741823&e)+(1073741823&t),i&s?2147483648^o^n^r:i|s?1073741824&o?3221225472^o^n^r:1073741824^o^n^r:o^n^r}function s(e,t,i){return e&t|~e&i}function n(e,t,i){return e&i|t&~i}function r(e,t,i){return e^t^i}function o(e,t,i){return t^(e|~i)}function a(e,n,r,o,a,u,l){return e=i(e,i(i(s(n,r,o),a),l)),i(t(e,u),n)}function u(e,s,r,o,a,u,l){return e=i(e,i(i(n(s,r,o),a),l)),i(t(e,u),s)}function l(e,s,n,o,a,u,l){return e=i(e,i(i(r(s,n,o),a),l)),i(t(e,u),s)}function d(e,s,n,r,a,u,l){return e=i(e,i(i(o(s,n,r),a),l)),i(t(e,u),s)}function c(e){for(var t,i=e.length,s=i+8,n=(s-s%64)/64,r=16*(n+1),o=Array(r-1),a=0,u=0;i>u;)t=(u-u%4)/4,a=8*(u%4),o[t]=o[t]|e.charCodeAt(u)<<a,u++;return t=(u-u%4)/4,a=8*(u%4),o[t]=o[t]|128<<a,o[r-2]=i<<3,o[r-1]=i>>>29,o}function p(e){var t,i,s="",n="";for(i=0;3>=i;i++)t=255&e>>>8*i,n="0"+t.toString(16),s+=n.substr(n.length-2,2);return s}function _(e){e=e.replace(/rn/g,"n");for(var t="",i=0;e.length>i;i++){var s=e.charCodeAt(i);128>s?t+=String.fromCharCode(s):s>127&&2048>s?(t+=String.fromCharCode(192|s>>6),t+=String.fromCharCode(128|63&s)):(t+=String.fromCharCode(224|s>>12),t+=String.fromCharCode(128|63&s>>6),t+=String.fromCharCode(128|63&s))}return t}var f,h,v,g,m,C,y,x,b,P=[],w=7,k=12,I=17,E=22,S=5,M=9,j=14,A=20,U=4,O=11,q=16,z=23,L=6,J=10,N=15,Q=21;for(e=_(e),P=c(e),C=1732584193,y=4023233417,x=2562383102,b=271733878,f=0;P.length>f;f+=16)h=C,v=y,g=x,m=b,C=a(C,y,x,b,P[f+0],w,3614090360),b=a(b,C,y,x,P[f+1],k,3905402710),x=a(x,b,C,y,P[f+2],I,606105819),y=a(y,x,b,C,P[f+3],E,3250441966),C=a(C,y,x,b,P[f+4],w,4118548399),b=a(b,C,y,x,P[f+5],k,1200080426),x=a(x,b,C,y,P[f+6],I,2821735955),y=a(y,x,b,C,P[f+7],E,4249261313),C=a(C,y,x,b,P[f+8],w,1770035416),b=a(b,C,y,x,P[f+9],k,2336552879),x=a(x,b,C,y,P[f+10],I,4294925233),y=a(y,x,b,C,P[f+11],E,2304563134),C=a(C,y,x,b,P[f+12],w,1804603682),b=a(b,C,y,x,P[f+13],k,4254626195),x=a(x,b,C,y,P[f+14],I,2792965006),y=a(y,x,b,C,P[f+15],E,1236535329),C=u(C,y,x,b,P[f+1],S,4129170786),b=u(b,C,y,x,P[f+6],M,3225465664),x=u(x,b,C,y,P[f+11],j,643717713),y=u(y,x,b,C,P[f+0],A,3921069994),C=u(C,y,x,b,P[f+5],S,3593408605),b=u(b,C,y,x,P[f+10],M,38016083),x=u(x,b,C,y,P[f+15],j,3634488961),y=u(y,x,b,C,P[f+4],A,3889429448),C=u(C,y,x,b,P[f+9],S,568446438),b=u(b,C,y,x,P[f+14],M,3275163606),x=u(x,b,C,y,P[f+3],j,4107603335),y=u(y,x,b,C,P[f+8],A,1163531501),C=u(C,y,x,b,P[f+13],S,2850285829),b=u(b,C,y,x,P[f+2],M,4243563512),x=u(x,b,C,y,P[f+7],j,1735328473),y=u(y,x,b,C,P[f+12],A,2368359562),C=l(C,y,x,b,P[f+5],U,4294588738),b=l(b,C,y,x,P[f+8],O,2272392833),x=l(x,b,C,y,P[f+11],q,1839030562),y=l(y,x,b,C,P[f+14],z,4259657740),C=l(C,y,x,b,P[f+1],U,2763975236),b=l(b,C,y,x,P[f+4],O,1272893353),x=l(x,b,C,y,P[f+7],q,4139469664),y=l(y,x,b,C,P[f+10],z,3200236656),C=l(C,y,x,b,P[f+13],U,681279174),b=l(b,C,y,x,P[f+0],O,3936430074),x=l(x,b,C,y,P[f+3],q,3572445317),y=l(y,x,b,C,P[f+6],z,76029189),C=l(C,y,x,b,P[f+9],U,3654602809),b=l(b,C,y,x,P[f+12],O,3873151461),x=l(x,b,C,y,P[f+15],q,530742520),y=l(y,x,b,C,P[f+2],z,3299628645),C=d(C,y,x,b,P[f+0],L,4096336452),b=d(b,C,y,x,P[f+7],J,1126891415),x=d(x,b,C,y,P[f+14],N,2878612391),y=d(y,x,b,C,P[f+5],Q,4237533241),C=d(C,y,x,b,P[f+12],L,1700485571),b=d(b,C,y,x,P[f+3],J,2399980690),x=d(x,b,C,y,P[f+10],N,4293915773),y=d(y,x,b,C,P[f+1],Q,2240044497),C=d(C,y,x,b,P[f+8],L,1873313359),b=d(b,C,y,x,P[f+15],J,4264355552),x=d(x,b,C,y,P[f+6],N,2734768916),y=d(y,x,b,C,P[f+13],Q,1309151649),C=d(C,y,x,b,P[f+4],L,4149444226),b=d(b,C,y,x,P[f+11],J,3174756917),x=d(x,b,C,y,P[f+2],N,718787259),y=d(y,x,b,C,P[f+9],Q,3951481745),C=i(C,h),y=i(y,v),x=i(x,g),b=i(b,m);var W=p(C)+p(y)+p(x)+p(b);return W.toLowerCase()},CoursePress.utility.get_gravatar=function(e,t,i,s,n){return e=void 0!==e?e:"john.doe@example.com",t=t>=1&&2048>=t?t:80,i=void 0!==i?i:"mm",s=void 0!==s?s:"x",n=n===!0?"y":"n","https://secure.gravatar.com/avatar/"+CoursePress.utility.md5(e.toLowerCase().trim())+"?size="+t+"&default="+encodeURIComponent(i)+"&rating="+s+("y"===n?"&forcedefault="+n:"")},CoursePress.utility.get_gravatar_image=function(e,t,i,s,n,r){var o=CoursePress.utility.get_gravatar(e,t,s,n,r);return i=void 0!==i?i:"",'<img class="avatar avatar-'+t+' photo" width="'+t+'" height="'+t+'" srcset="'+o+' 2x" src="'+o+'" alt="'+i+'">'},CoursePress.utility.fix_checkboxes=function(t,i,s){var n=e(i+' [name^="meta_"]');return void 0===s&&(s=!1),e.each(n,function(i,n){var r=e(n).attr("name");"checkbox"===n.type&&void 0===_.findWhere(t,{name:r})&&t.push({name:r,value:s})}),t},CoursePress.utility.is_equal=function(e,t,i){return void 0===i?e==t:e===t},CoursePress.utility.checked=function(e,t){return CoursePress.utility.is_equal(e,t)?'checked="checked"':""},CoursePress.utility.event_supported=function(){function e(e){var i=document.createElement(t[e]||"div");e="on"+e;var s=e in i;return s||(i.setAttribute(e,"return;"),s="function"==typeof i[e]),i=null,s}var t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img",click:"textarea"};return e},CoursePress.utility.attachment_by_url=function(e,t,i,s){var n=new CoursePress.Models.utility.Attachment;n.get_attachment(e,t,i,s)},CoursePress.utility.hex_to_rgb=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,s){return t+t+i+i+s+s});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},CoursePress.UI=CoursePress.UI||{},CoursePress.UI.toggle_switch=function(t,i,s){void 0===s&&(s=[]);var n="",r=s["class"]||"",o=s.label||"",a=s.label_class||"",u=s.left||"",l=s.left_class||"",d=s.right||"",c=s.right_class||"",p=s.state||"off",f="";return s.data&&_.isArray(s.data)&&e.each(s.data,function(e,t){f+=_.isString(t)?" data-"+e+'="'+t+'"':""}),n+='<div id="'+t+'" class="toggle-switch coursepress-ui-toggle-switch '+r+" "+p+'" name="'+i+'" '+f+">",o.length>0&&(n+='<span class="label '+a+'">'+o+"</span>"),u.length>0&&(n+='<span class="left '+l+'">'+u+"</span>"),n+='<div class="control"><div class="toggle"></div></div>',d.length>0&&(n+='<span class="right '+c+'">'+d+"</span>"),n+="</div>"},CoursePress.UI.browse_media_field=function(e,t,i){void 0===t&&(t=e),void 0===i&&(i={}),i.title=i.title?i.title:"",i.container_class=i.container_class?i.container_class:"wide",i.textbox_class=i.textbox_class?i.textbox_class:"medium",i.value=i.value?i.value:"",i.placeholder=i.placeholder?i.placeholder:"",i.button_text=i.button_text?i.button_text:"",i.type=i.type?i.type:"image",i.invalid_message=i.invalid_message?i.invalid_message:_coursepress.invalid_extension_message,i.description=i.description?i.description:"";var s=!1;"image"===i.type&&(s=_coursepress.allowed_image_extensions.join(", ")),"audio"===i.type&&(s=_coursepress.allowed_audio_extensions.join(", ")),"video"===i.type&&(s=_coursepress.allowed_video_extensions.join(", ")),!s&&_coursepress.allowed_extensions&&(s=_coursepress.allowed_extensions.join(", "));var n='<div class="'+i.container_class+'">';i.title&&(n+='<label for="'+t+'">'+i.title),i.description&&(n+='<p class="description">'+i.description+"</p>"),i.title&&(n+="</label>");var r=e?'id="'+e+'"':"";return n+='<input class="'+i.textbox_class+" "+i.type+'_url" type="text" name="'+t+'" '+r+' placeholder="'+i.placeholder+'" value="'+i.value+'"/>'+'<input class="button browse-media-field" type="button" name="'+t+'-button" value="'+i.button_text+'"/>'+'<div class="invalid_extension_message">'+i.invalid_message+" "+s+"</div>"+"</div>"},CoursePress.UI.link_popup=function(e,t,i){var s="";return void 0===t&&(t=e),void 0===i&&(i={}),0>=i.content.length?"":(i.content=i.content?i.content:"",i.link_text=i.link_text?i.link_text:"",i.class=i.class?i.class:"",s='<div id="'+e+'" name="'+t+'" class="link-popup '+i.class+'">'+'<a class="popup-link">'+i.link_text+"</a>"+'<div class="popup hidden">'+'<div class="popup-before"></div>'+'<div class="popup-button">&times;</div>'+'<div class="popup-content">'+i.content+"</div>"+"</div>"+"</div>")},e.fn.extend({browse_media_field:function(){return this.each(function(){var t=e(this).attr("name").replace("-button",""),i=e(e(this).parents("div").find("#"+t));e(i).on("keyup",function(){CoursePress.utility.valid_media_extension(e(i).val(),i)?(e(i).removeClass("invalid_extension_field"),e(i).parent().find(".invalid_extension_message").hide()):(e(i).addClass("invalid_extension_field"),e(i).parent().find(".invalid_extension_message").show())}),e(this).on("click",function(){var t=jQuery(this),s=i;return wp.media.string.props=function(i,n){e(s).val(i.url),CoursePress.utility.valid_media_extension(n.url,s)?(e(s).removeClass("invalid_extension_field"),e(s).parent().find(".invalid_extension_message").hide()):(e(s).addClass("invalid_extension_field"),e(s).parent().find(".invalid_extension_message").show()),t.trigger("change")},wp.media.editor.send.attachment=function(i,n){e(s).val(n.url),CoursePress.utility.valid_media_extension(n.url,s)?(e(s).removeClass("invalid_extension_field"),e(s).parent().find(".invalid_extension_message").hide()):(e(s).addClass("invalid_extension_field"),e(s).parent().find(".invalid_extension_message").show()),t.trigger("change")},wp.media.editor.open(s),!1})})},coursepress_timer:function(t){t=t||{seconds:10,running:!1,action:"none"},window.console.log(t);var i=t.seconds,s=0,n=jQuery(this),r=0!==parseInt(i/60/60);switch(t.action){case"none":n.append('<div class="cp-counter-clock"> </div>');var o=parseInt(i/60/60),a=parseInt((i-60*60*o)/60),u=i-60*60*o-60*a,l="";r&&(l+=CoursePress.utility.pad(o,2)+":"),l+=CoursePress.utility.pad(a,2)+":",l+=CoursePress.utility.pad(u,2),e(n.find(".cp-counter-clock")[0]).replaceWith('<div class="cp-counter-clock">'+l+"</div>"),n.append('<input class="cp-counter-start" type="button" value="'+_coursepress.labels.module_start_quiz+'">'),n.find(".cp-counter-start").on("click",function(){t.action="start",n.coursepress_timer(t),e(n.find(".cp-counter-start")).detach(),e(t.toggle_element).show(),e(".focus-nav").addClass("not-active"),e(".coursepress-breadcrumbs a").addClass("not-active")});break;case"start":return this.each(function(){n.trigger("timer_started",i);var t=setInterval(function(){if(i>0){i-=1,s+=1;var o=parseInt(i/60/60),a=parseInt((i-60*60*o)/60),u=i-60*60*o-60*a,l="";r&&(l+=CoursePress.utility.pad(o,2)+":"),l+=CoursePress.utility.pad(a,2)+":",l+=CoursePress.utility.pad(u,2),e(n.find(".cp-counter-clock")[0]).replaceWith('<div class="cp-counter-clock">'+l+"</div>"),n.trigger("timer_updated",s,i)}else n.trigger("timer_ended"),e(".module-quiz-question input").attr("disabled","disabled"),clearInterval(t)},1e3)})}},coursepress_ui_toggle:function(){return this.each(function(){e(this).off("click"),e(this).on("click",function(){var t="";e(this).addClass("toggle-ui-widget"),e(this).hasClass("on")?(e(this).removeClass("on"),e(this).addClass("off"),t="off"):(e(this).removeClass("off"),e(this).addClass("on"),t="on"),e(this).trigger("change",t)})})},link_popup:function(t){var i=this;i.options=t,i.link={},this.each(function(t,s){var n=e(this).attr("id"),r=e(this).attr("name"),o=e(this).attr("class"),a=this.innerHTML,u={};u.content=a,u.link_text=i.options.link_text||"Link",u.class=o,u.offset_x=i.options.offset_x||35,a=CoursePress.UI.link_popup(n,r,u),e(s).empty(),e(s).append(a);var l=e(s).find(".popup-link");e(l).on("click",function(t){if(e(".link-popup .popup-link").removeClass("open"),e('.popup .popup-before[display!="none"], .popup .popup-button[display!="none"], .popup .popup-content[display!="none"]').parent().fadeOut(100),e(this).hasClass("open"))e(this).removeClass("open"),e(document).click();else{t.stopPropagation(),e(this).addClass("open");var i=e(this).siblings(".popup"),s=e(this).siblings(".popup").find(".popup-before");e(document).width()-(e(this).offset().left+u.offset_x)>i.width()?i.css("left",e(this).position().left+u.offset_x):(i.css("left",e(this).position().left-(i.width()+10)),s.css("transform","rotate(180deg)"),s.css("-ms-transform","rotate(180deg)"),s.css("-webkit-transform","rotate(180deg)"),s.css("left",i.width())),i.css("position","absolute"),i.css("top",e(this).position().top-7),i.fadeIn(300)}}),e(".popup").on("click",function(e){e.stopPropagation()})}),e(document).click(function(){e(".link-popup .popup-link").removeClass("open"),e('.popup .popup-before[display!="none"], .popup .popup-button[display!="none"], .popup .popup-content[display!="none"]').parent().fadeOut(100)}),e(".link-popup .popup-button ").on("click",function(){e(".link-popup .popup-link").removeClass("open"),e('.popup .popup-before[display!="none"], .popup .popup-button[display!="none"], .popup .popup-content[display!="none"]').parent().fadeOut(100)})}}),e(".certificate_background_button").on("click",function(){var t=e(this).prevAll(".certificate_background_url:first");return wp.media.string.props=function(i,s){e(t).val(i.url),CoursePress.utility.valid_media_extension(s.url,t)?(e(t).removeClass("invalid_extension_field"),e(t).parent().find(".invalid_extension_message").hide()):(e(t).addClass("invalid_extension_field"),e(t).parent().find(".invalid_extension_message").show())},wp.media.editor.send.attachment=function(i,s){e(t).val(s.url),CoursePress.utility.valid_media_extension(s.url,t)?(e(t).removeClass("invalid_extension_field"),e(t).parent().find(".invalid_extension_message").hide()):(e(t).addClass("invalid_extension_field"),e(t).parent().find(".invalid_extension_message").show())},wp.media.editor.open(this),!1}),CoursePress.Models=CoursePress.Models||{},CoursePress.Models.utility=CoursePress.Models.utility||{},CoursePress.Models.utility.Attachment=Backbone.Model.extend({initialize:function(){this.on("sync",this.process,this)},get_attachment:function(e,t,i,s){this.attachment_url=e,this.target=t,this.field=s?s:"post_excerpt",this.fallback=i?i:"",this.url=_coursepress._ajax_url+"?action=attachment_model&task=get&url="+e,this.fetch()},process:function(){if(this.get(0)){var t=this.get(0)[this.field];t=t.length>0?t:this.fallback,e(e(this.target)[0]).html(t)}}})})(jQuery);