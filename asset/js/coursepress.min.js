/*!  - v2.0.0
 * 
 * Copyright (c) 2016; * Licensed GPLv2+ */
var CoursePress=CoursePress||{};(function(e){CoursePress.Events=CoursePress.Events||_.extend({},Backbone.Events),CoursePress.editor=CoursePress.editor||{},void 0!==window.getUserSetting&&(CoursePress.editor.init_mode=window.getUserSetting("editor")),CoursePress.editor.create=function(t,s,i,r,a,n){if(void 0===n&&(n=400),void 0===tinyMCEPreInit)return!1;a=void 0===a?!0:!1,s=s.replace(/\#/g,"");var o=_coursepress._dummy_editor,u=o.match(/id="dummy_editor_id">(.*|\s)/)[1];o=o.replace(/dummy_editor_id/g,s),o=o.replace(u,r),o=o.replace(/dummy_editor_content/g,r),o=o.replace(/dummy_editor_name/g,i),o=o.replace(/rows="\d*"/g,'style="height: '+n+'px"'),o=o.replace(/<p>\s/g,""),a?e(t).append(o):e(t).replaceWith(o);var l=JSON.parse(JSON.stringify(tinyMCEPreInit.mceInit.dummy_editor_id));return void 0!==l&&(l.body_class=l.body_class.replace(/dummy_editor_id/g,s),l.selector=l.selector.replace(/dummy_editor_id/g,s),l.init_instance_callback="CoursePress.editor.on_init",l.cache_suffix="",l.setup=function(e){e.on("keyup",function(){CoursePress.Events.trigger("editor:keyup",e)})},e("textarea#"+s).on("keyup",function(){CoursePress.Events.trigger("editor:keyup",this)}),tinyMCE.init(l),tinyMCEPreInit.mceInit[s]=l),l=JSON.parse(JSON.stringify(tinyMCEPreInit.qtInit.dummy_editor_id)),void 0!==l&&(l.id=s,l=window.quicktags(l),tinyMCEPreInit.qtInit[s]=l),window.QTags._buttonsInit(),!0},CoursePress.editor.content=function(t,s){var i="get";return void 0!==s&&(i="set"),void 0===tinyMCE||"html"===window.getUserSetting("editor")?(t="html"===window.getUserSetting("editor")?"#"+t:t,"set"===i&&e(t).val(s.trim()),e(t).val()):("set"===i&&tinyMCE.get(t).setContent(s.trim()),tinyMCE.get(t).getContent())},CoursePress.editor.set_height=function(t,s){e("#wp-"+t+"-editor-container").removeAttr("rows"),e("#wp-"+t+"-wrap iframe").css("height",s+"px")},CoursePress.editor.on_init=function(t){var s=CoursePress.editor.init_mode,i="#"+t.id+"-html",r="#"+t.id+"-tmce",a="#wp-"+t.id+"-editor-tools .wp-editor-tabs";e(i).detach(),e(r).detach();var n='<button id="'+t.id+"-visual"+'" class="wp-switch-editor switch-tmce" type="button">'+_coursepress.editor_visual+"</button>",o='<button id="'+t.id+"-text"+'" class="wp-switch-editor switch-html" type="button">'+_coursepress.editor_text+"</button>";e(a).append('<button class="hidden"></button>'),e(a+' [class="hidden"]').on("click",function(e){e.preventDefault(),e.stopPropagation()}),e(a).append(n),e(a+" #"+t.id+"-visual").on("click",function(e){e.preventDefault(),e.stopPropagation(),window.switchEditors.go(t.id,"tmce")}),e(a).append(o),e(a+" #"+t.id+"-text").on("click",function(e){e.preventDefault(),e.stopPropagation(),window.switchEditors.go(t.id,"html")}),"html"===s&&e(a+" #"+t.id+"-text").click()},CoursePress.utility=CoursePress.utility||{},CoursePress.utility.merge_distinct=function(t,s){var i=t;return e.each(s,function(t,s){i[t]=e.isArray(s)&&e.isArray(i[t])?CoursePress.utility.merge_distinct(i[t],s):s}),i},CoursePress.utility.update_object_by_path=function(e,t,s){for(var i=t.split("/");i.length>1;){var r=i.shift();e[r]?e=e[r]:(e[r]={},e=e[r])}e[i.shift()]=s},CoursePress.utility.get_object_path=function(e,t,s,i){void 0===i&&(i="");for(var r=Object.keys(e);r.length>0;){var a=r.shift();if(_.isObject(e[a]))return i=0!==i.length?i+"/"+a:a,CoursePress.utility.get_object_path(e[a],t,s,i);if(a===t&&e[a]===s)return i+"/"+a}},CoursePress.utility.in_array=function(e,t){return t.indexOf(e)>-1},CoursePress.utility.is_valid_url=function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1?!0:!1},CoursePress.utility.valid_media_extension=function(t,s){s=e(s).hasClass("image_url")?"image_url":s,s=e(s).hasClass("audio_url")?"audio_url":s,s=e(s).hasClass("video_url")?"video_url":s;var i=t.split(".").pop(),r=_coursepress.allowed_audio_extensions,a=_coursepress.allowed_video_extensions,n=_coursepress.allowed_image_extensions;return"featured_url"===s&&(s="image_url"),"course_video_url"===s&&(s="video_url"),"audio_url"===s?CoursePress.utility.in_array(i,r)?!0:CoursePress.utility.is_valid_url(t)&&i.length>5?!0:t.length?!1:!0:"video_url"===s?CoursePress.utility.in_array(i,a)?!0:CoursePress.utility.is_valid_url(t)&&i.length>5?!0:t.length?!1:!0:"image_url"===s?CoursePress.utility.in_array(i,n)?!0:CoursePress.utility.is_valid_url(t)&&i.length>5?!0:t.length?!1:!0:_coursepress.allowed_extensions?CoursePress.utility.in_array(i,_coursepress.allowed_extensions)?!0:CoursePress.utility.is_valid_url(t)&&i.length>5?!0:t.length?!1:!0:void 0},CoursePress.utility.pad=function(e,t){for(var s=e+"";t>s.length;)s="0"+s;return s},CoursePress.utility.unserialize=function(e){function t(e,t,s,i){throw new a.window[e](t,s,i)}function s(e,s,i){for(var r=2,a=[],n=e.slice(s,s+1);n!==i;)r+s>e.length&&t("Error","Invalid"),a.push(n),n=e.slice(s+(r-1),s+r),r+=1;return[a.length,a.join("")]}function i(e,t,s){var i,r,a;for(a=[],i=0;s>i;i++)r=e.slice(t+(i-1),t+i),a.push(r),s-=n(r);return[a.length,a.join("")]}function r(e,a){var n,o,u,l,c,d,p,_,m,h,f,v,g,b,C,w,P,y,k=0,x=function(e){return e};switch(a||(a=0),n=e.slice(a,a+1).toLowerCase(),o=a+2,n){case"i":x=function(e){return parseInt(e,10)},m=s(e,o,";"),k=m[0],_=m[1],o+=k+1;break;case"b":x=function(e){return 0!==parseInt(e,10)},m=s(e,o,";"),k=m[0],_=m[1],o+=k+1;break;case"d":x=function(e){return parseFloat(e)},m=s(e,o,";"),k=m[0],_=m[1],o+=k+1;break;case"n":_=null;break;case"s":h=s(e,o,":"),k=h[0],f=h[1],o+=k+2,m=i(e,o+1,parseInt(f,10)),k=m[0],_=m[1],o+=k+2,k!==parseInt(f,10)&&k!==_.length&&t("SyntaxError","String length mismatch");break;case"a":for(_={},u=s(e,o,":"),k=u[0],l=u[1],o+=k+2,d=parseInt(l,10),c=!0,v=0;d>v;v++)b=r(e,o),C=b[1],g=b[2],o+=C,w=r(e,o),P=w[1],y=w[2],o+=P,g!==v&&(c=!1),_[g]=y;if(c){for(p=Array(d),v=0;d>v;v++)p[v]=_[v];_=p}o+=1;break;default:t("SyntaxError","Unknown / Unhandled data type(s): "+n)}return[n,o-a,x(_)]}var a=this,n=function(e){var t=e.charCodeAt(0);return 128>t?0:2048>t?1:2};return r(e+"",0)[2]},CoursePress.utility.hashcode=function(e){var t,s,i,r=0;if(!e.length)return r;for(t=0,i=e.length;i>t;t++)s=e.charCodeAt(t),r=(r<<5)-r+s,r|=0;return r},CoursePress.utility.md5=function(e){function t(e,t){return e<<t|e>>>32-t}function s(e,t){var s,i,r,a,n;return r=2147483648&e,a=2147483648&t,s=1073741824&e,i=1073741824&t,n=(1073741823&e)+(1073741823&t),s&i?2147483648^n^r^a:s|i?1073741824&n?3221225472^n^r^a:1073741824^n^r^a:n^r^a}function i(e,t,s){return e&t|~e&s}function r(e,t,s){return e&s|t&~s}function a(e,t,s){return e^t^s}function n(e,t,s){return t^(e|~s)}function o(e,r,a,n,o,u,l){return e=s(e,s(s(i(r,a,n),o),l)),s(t(e,u),r)}function u(e,i,a,n,o,u,l){return e=s(e,s(s(r(i,a,n),o),l)),s(t(e,u),i)}function l(e,i,r,n,o,u,l){return e=s(e,s(s(a(i,r,n),o),l)),s(t(e,u),i)}function c(e,i,r,a,o,u,l){return e=s(e,s(s(n(i,r,a),o),l)),s(t(e,u),i)}function d(e){for(var t,s=e.length,i=s+8,r=(i-i%64)/64,a=16*(r+1),n=Array(a-1),o=0,u=0;s>u;)t=(u-u%4)/4,o=8*(u%4),n[t]=n[t]|e.charCodeAt(u)<<o,u++;return t=(u-u%4)/4,o=8*(u%4),n[t]=n[t]|128<<o,n[a-2]=s<<3,n[a-1]=s>>>29,n}function p(e){var t,s,i="",r="";for(s=0;3>=s;s++)t=255&e>>>8*s,r="0"+t.toString(16),i+=r.substr(r.length-2,2);return i}function _(e){e=e.replace(/rn/g,"n");for(var t="",s=0;e.length>s;s++){var i=e.charCodeAt(s);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(192|i>>6),t+=String.fromCharCode(128|63&i)):(t+=String.fromCharCode(224|i>>12),t+=String.fromCharCode(128|63&i>>6),t+=String.fromCharCode(128|63&i))}return t}var m,h,f,v,g,b,C,w,P,y=[],k=7,x=12,I=17,M=22,V=5,q=9,U=14,E=20,z=4,B=11,A=16,j=23,H=6,S=10,T=15,D=21;for(e=_(e),y=d(e),b=1732584193,C=4023233417,w=2562383102,P=271733878,m=0;y.length>m;m+=16)h=b,f=C,v=w,g=P,b=o(b,C,w,P,y[m+0],k,3614090360),P=o(P,b,C,w,y[m+1],x,3905402710),w=o(w,P,b,C,y[m+2],I,606105819),C=o(C,w,P,b,y[m+3],M,3250441966),b=o(b,C,w,P,y[m+4],k,4118548399),P=o(P,b,C,w,y[m+5],x,1200080426),w=o(w,P,b,C,y[m+6],I,2821735955),C=o(C,w,P,b,y[m+7],M,4249261313),b=o(b,C,w,P,y[m+8],k,1770035416),P=o(P,b,C,w,y[m+9],x,2336552879),w=o(w,P,b,C,y[m+10],I,4294925233),C=o(C,w,P,b,y[m+11],M,2304563134),b=o(b,C,w,P,y[m+12],k,1804603682),P=o(P,b,C,w,y[m+13],x,4254626195),w=o(w,P,b,C,y[m+14],I,2792965006),C=o(C,w,P,b,y[m+15],M,1236535329),b=u(b,C,w,P,y[m+1],V,4129170786),P=u(P,b,C,w,y[m+6],q,3225465664),w=u(w,P,b,C,y[m+11],U,643717713),C=u(C,w,P,b,y[m+0],E,3921069994),b=u(b,C,w,P,y[m+5],V,3593408605),P=u(P,b,C,w,y[m+10],q,38016083),w=u(w,P,b,C,y[m+15],U,3634488961),C=u(C,w,P,b,y[m+4],E,3889429448),b=u(b,C,w,P,y[m+9],V,568446438),P=u(P,b,C,w,y[m+14],q,3275163606),w=u(w,P,b,C,y[m+3],U,4107603335),C=u(C,w,P,b,y[m+8],E,1163531501),b=u(b,C,w,P,y[m+13],V,2850285829),P=u(P,b,C,w,y[m+2],q,4243563512),w=u(w,P,b,C,y[m+7],U,1735328473),C=u(C,w,P,b,y[m+12],E,2368359562),b=l(b,C,w,P,y[m+5],z,4294588738),P=l(P,b,C,w,y[m+8],B,2272392833),w=l(w,P,b,C,y[m+11],A,1839030562),C=l(C,w,P,b,y[m+14],j,4259657740),b=l(b,C,w,P,y[m+1],z,2763975236),P=l(P,b,C,w,y[m+4],B,1272893353),w=l(w,P,b,C,y[m+7],A,4139469664),C=l(C,w,P,b,y[m+10],j,3200236656),b=l(b,C,w,P,y[m+13],z,681279174),P=l(P,b,C,w,y[m+0],B,3936430074),w=l(w,P,b,C,y[m+3],A,3572445317),C=l(C,w,P,b,y[m+6],j,76029189),b=l(b,C,w,P,y[m+9],z,3654602809),P=l(P,b,C,w,y[m+12],B,3873151461),w=l(w,P,b,C,y[m+15],A,530742520),C=l(C,w,P,b,y[m+2],j,3299628645),b=c(b,C,w,P,y[m+0],H,4096336452),P=c(P,b,C,w,y[m+7],S,1126891415),w=c(w,P,b,C,y[m+14],T,2878612391),C=c(C,w,P,b,y[m+5],D,4237533241),b=c(b,C,w,P,y[m+12],H,1700485571),P=c(P,b,C,w,y[m+3],S,2399980690),w=c(w,P,b,C,y[m+10],T,4293915773),C=c(C,w,P,b,y[m+1],D,2240044497),b=c(b,C,w,P,y[m+8],H,1873313359),P=c(P,b,C,w,y[m+15],S,4264355552),w=c(w,P,b,C,y[m+6],T,2734768916),C=c(C,w,P,b,y[m+13],D,1309151649),b=c(b,C,w,P,y[m+4],H,4149444226),P=c(P,b,C,w,y[m+11],S,3174756917),w=c(w,P,b,C,y[m+2],T,718787259),C=c(C,w,P,b,y[m+9],D,3951481745),b=s(b,h),C=s(C,f),w=s(w,v),P=s(P,g);var F=p(b)+p(C)+p(w)+p(P);return F.toLowerCase()},CoursePress.utility.get_gravatar=function(e,t,s,i,r){return e=void 0!==e?e:"john.doe@example.com",t=t>=1&&2048>=t?t:80,s=void 0!==s?s:"mm",i=void 0!==i?i:"x",r=r===!0?"y":"n","https://secure.gravatar.com/avatar/"+CoursePress.utility.md5(e.toLowerCase().trim())+"?size="+t+"&default="+encodeURIComponent(s)+"&rating="+i+("y"===r?"&forcedefault="+r:"")},CoursePress.utility.get_gravatar_image=function(e,t,s,i,r,a){var n=CoursePress.utility.get_gravatar(e,t,i,r,a);return s=void 0!==s?s:"",'<img class="avatar avatar-'+t+' photo" width="'+t+'" height="'+t+'" srcset="'+n+' 2x" src="'+n+'" alt="'+s+'">'},CoursePress.utility.fix_checkboxes=function(t,s,i){var r=e(s+' [name^="meta_"]');return void 0===i&&(i=!1),e.each(r,function(s,r){var a=e(r).attr("name");"checkbox"===r.type&&void 0===_.findWhere(t,{name:a})&&t.push({name:a,value:i})}),t},CoursePress.utility.is_equal=function(e,t,s){return void 0===s?e==t:e===t},CoursePress.utility.checked=function(e,t){return CoursePress.utility.is_equal(e,t)?'checked="checked"':""},CoursePress.utility.event_supported=function(){function e(e){var s=document.createElement(t[e]||"div");e="on"+e;var i=e in s;return i||(s.setAttribute(e,"return;"),i="function"==typeof s[e]),s=null,i}var t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img",click:"textarea"};return e},CoursePress.utility.attachment_by_url=function(e,t,s,i){var r=new CoursePress.Models.utility.Attachment;r.get_attachment(e,t,s,i)},CoursePress.utility.hex_to_rgb=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,s,i){return t+t+s+s+i+i});var s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return s?{r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16)}:null},CoursePress.UI=CoursePress.UI||{},CoursePress.UI.toggle_switch=function(t,s,i){void 0===i&&(i=[]);var r="",a=i["class"]||"",n=i.label||"",o=i.label_class||"",u=i.left||"",l=i.left_class||"",c=i.right||"",d=i.right_class||"",p=i.state||"off",m="";return i.data&&_.isArray(i.data)&&e.each(i.data,function(e,t){m+=_.isString(t)?" data-"+e+'="'+t+'"':""}),r+='<div id="'+t+'" class="toggle-switch coursepress-ui-toggle-switch '+a+" "+p+'" name="'+s+'" '+m+">",n.length>0&&(r+='<span class="label '+o+'">'+n+"</span>"),u.length>0&&(r+='<span class="left '+l+'">'+u+"</span>"),r+='<div class="control"><div class="toggle"></div></div>',c.length>0&&(r+='<span class="right '+d+'">'+c+"</span>"),r+="</div>"},CoursePress.UI.browse_media_field=function(e,t,s){void 0===t&&(t=e),void 0===s&&(s={}),s.title=s.title?s.title:"",s.container_class=s.container_class?s.container_class:"wide",s.textbox_class=s.textbox_class?s.textbox_class:"medium",s.value=s.value?s.value:"",s.placeholder=s.placeholder?s.placeholder:"",s.button_text=s.button_text?s.button_text:"",s.type=s.type?s.type:"image",s.invalid_message=s.invalid_message?s.invalid_message:_coursepress.invalid_extension_message,s.description=s.description?s.description:"";var i=!1;"image"===s.type&&(i=_coursepress.allowed_image_extensions.join(", ")),"audio"===s.type&&(i=_coursepress.allowed_audio_extensions.join(", ")),"video"===s.type&&(i=_coursepress.allowed_video_extensions.join(", ")),!i&&_coursepress.allowed_extensions&&(i=_coursepress.allowed_extensions.join(", "));var r='<div class="'+s.container_class+'">';s.title&&(r+='<label for="'+t+'">'+s.title),s.description&&(r+='<p class="description">'+s.description+"</p>"),s.title&&(r+="</label>");var a=e?'id="'+e+'"':"";return r+='<input class="'+s.textbox_class+" "+s.type+'_url" type="text" name="'+t+'" '+a+' placeholder="'+s.placeholder+'" value="'+s.value+'"/>'+'<input class="button browse-media-field" type="button" name="'+t+'-button" value="'+s.button_text+'"/>'+'<div class="invalid_extension_message">'+s.invalid_message+" "+i+"</div>"+"</div>"},CoursePress.UI.link_popup=function(e,t,s){var i="";return void 0===t&&(t=e),void 0===s&&(s={}),0>=s.content.length?"":(s.content=s.content?s.content:"",s.link_text=s.link_text?s.link_text:"",s.class=s.class?s.class:"",i='<div id="'+e+'" name="'+t+'" class="link-popup '+s.class+'">'+'<a class="popup-link">'+s.link_text+"</a>"+'<div class="popup hidden">'+'<div class="popup-before"></div>'+'<div class="popup-button">&times;</div>'+'<div class="popup-content">'+s.content+"</div>"+"</div>"+"</div>")},e.fn.extend({browse_media_field:function(){return this.each(function(){var t=e(this).attr("name").replace("-button",""),s=e(e(this).parents("div").find("#"+t));e(s).on("keyup",function(){CoursePress.utility.valid_media_extension(e(s).val(),s)?(e(s).removeClass("invalid_extension_field"),e(s).parent().find(".invalid_extension_message").hide()):(e(s).addClass("invalid_extension_field"),e(s).parent().find(".invalid_extension_message").show())}),e(this).on("click",function(){var t=jQuery(this),i=s;return wp.media.string.props=function(s,r){e(i).val(s.url),CoursePress.utility.valid_media_extension(r.url,i)?(e(i).removeClass("invalid_extension_field"),e(i).parent().find(".invalid_extension_message").hide()):(e(i).addClass("invalid_extension_field"),e(i).parent().find(".invalid_extension_message").show()),t.trigger("change")},wp.media.editor.send.attachment=function(s,r){e(i).val(r.url),CoursePress.utility.valid_media_extension(r.url,i)?(e(i).removeClass("invalid_extension_field"),e(i).parent().find(".invalid_extension_message").hide()):(e(i).addClass("invalid_extension_field"),e(i).parent().find(".invalid_extension_message").show()),t.trigger("change")},wp.media.editor.open(i),!1})})},coursepress_timer:function(t){t=t||{seconds:10,running:!1,action:"none"},window.console.log(t);var s=t.seconds,i=0,r=jQuery(this),a=0!==parseInt(s/60/60);switch(t.action){case"none":r.append('<div class="cp-counter-clock"> </div>');var n=parseInt(s/60/60),o=parseInt((s-60*60*n)/60),u=s-60*60*n-60*o,l="";a&&(l+=CoursePress.utility.pad(n,2)+":"),l+=CoursePress.utility.pad(o,2)+":",l+=CoursePress.utility.pad(u,2),e(r.find(".cp-counter-clock")[0]).replaceWith('<div class="cp-counter-clock">'+l+"</div>"),r.append('<input class="cp-counter-start" type="button" value="'+_coursepress.labels.module_start_quiz+'">'),r.find(".cp-counter-start").on("click",function(){t.action="start",r.coursepress_timer(t),e(r.find(".cp-counter-start")).detach(),e(t.toggle_element).show(),e(".focus-nav").addClass("not-active"),e(".coursepress-breadcrumbs a").addClass("not-active")});break;case"start":return this.each(function(){r.trigger("timer_started",s);var t=setInterval(function(){if(s>0){s-=1,i+=1;var n=parseInt(s/60/60),o=parseInt((s-60*60*n)/60),u=s-60*60*n-60*o,l="";a&&(l+=CoursePress.utility.pad(n,2)+":"),l+=CoursePress.utility.pad(o,2)+":",l+=CoursePress.utility.pad(u,2),e(r.find(".cp-counter-clock")[0]).replaceWith('<div class="cp-counter-clock">'+l+"</div>"),r.trigger("timer_updated",i,s)}else r.trigger("timer_ended"),e(".module-quiz-question input").attr("disabled","disabled"),clearInterval(t)},1e3)})}},coursepress_ui_toggle:function(){return this.each(function(){e(this).off("click"),e(this).on("click",function(){var t="";e(this).addClass("toggle-ui-widget"),e(this).hasClass("on")?(e(this).removeClass("on"),e(this).addClass("off"),t="off"):(e(this).removeClass("off"),e(this).addClass("on"),t="on"),e(this).trigger("change",t)})})},link_popup:function(t){var s=this;s.options=t,s.link={},this.each(function(t,i){var r=e(this).attr("id"),a=e(this).attr("name"),n=e(this).attr("class"),o=this.innerHTML,u={};u.content=o,u.link_text=s.options.link_text||"Link",u.class=n,u.offset_x=s.options.offset_x||35,o=CoursePress.UI.link_popup(r,a,u),e(i).empty(),e(i).append(o);var l=e(i).find(".popup-link");e(l).on("click",function(t){if(e(".link-popup .popup-link").removeClass("open"),e('.popup .popup-before[display!="none"], .popup .popup-button[display!="none"], .popup .popup-content[display!="none"]').parent().fadeOut(100),e(this).hasClass("open"))e(this).removeClass("open"),e(document).click();else{t.stopPropagation(),e(this).addClass("open");var s=e(this).siblings(".popup"),i=e(this).siblings(".popup").find(".popup-before");e(document).width()-(e(this).offset().left+u.offset_x)>s.width()?s.css("left",e(this).position().left+u.offset_x):(s.css("left",e(this).position().left-(s.width()+10)),i.css("transform","rotate(180deg)"),i.css("-ms-transform","rotate(180deg)"),i.css("-webkit-transform","rotate(180deg)"),i.css("left",s.width())),s.css("position","absolute"),s.css("top",e(this).position().top-7),s.fadeIn(300)}}),e(".popup").on("click",function(e){e.stopPropagation()})}),e(document).click(function(){e(".link-popup .popup-link").removeClass("open"),e('.popup .popup-before[display!="none"], .popup .popup-button[display!="none"], .popup .popup-content[display!="none"]').parent().fadeOut(100)}),e(".link-popup .popup-button ").on("click",function(){e(".link-popup .popup-link").removeClass("open"),e('.popup .popup-before[display!="none"], .popup .popup-button[display!="none"], .popup .popup-content[display!="none"]').parent().fadeOut(100)})}}),CoursePress.Models=CoursePress.Models||{},CoursePress.Models.utility=CoursePress.Models.utility||{},CoursePress.Models.utility.Attachment=Backbone.Model.extend({initialize:function(){this.on("sync",this.process,this)},get_attachment:function(e,t,s,i){this.attachment_url=e,this.target=t,this.field=i?i:"post_excerpt",this.fallback=s?s:"",this.url=_coursepress._ajax_url+"?action=attachment_model&task=get&url="+e,this.fetch()},process:function(){if(this.get(0)){var t=this.get(0)[this.field];t=t.length>0?t:this.fallback,e(e(this.target)[0]).html(t)}}}),function(){function e(e,t){return jQuery(t).val(e),CoursePress.utility.valid_media_extension(e,t)?(jQuery(t).removeClass("invalid_extension_field"),jQuery(t).parent().find(".invalid_extension_message").hide(),!0):(jQuery(t).addClass("invalid_extension_field"),jQuery(t).parent().find(".invalid_extension_message").show(),!1)}function t(){var t=jQuery(this),s=t.prevAll(".certificate_background_url:first");return wp.media.string.props=function(t){e(t.url,s)},wp.media.editor.send.attachment=function(t,i){e(i.url,s)},wp.media.editor.open(this),!1}function s(){var e=jQuery(".certificate_enabled"),t=jQuery(".certificate-details");e.is(":checked")?t.show():t.hide()}jQuery(".certificate_enabled").on("click",s),jQuery(".certificate_background_button").on("click",t),window.setTimeout(s,10)}(),function(){function e(e,t){for(var s=!0,i=0;t.length>i;i+=1)if(!jQuery(t[i]).is(":checked")){s=!1;break}s?jQuery(e).show():jQuery(e).hide()}function t(){e(".cp-content-box.course",[this,".coursepress_courses_cap input"]),e(".cp-content-box.course-category",[this,".coursepress_courses_cap input"]),e(".cp-content-box.course-unit",[this,".coursepress_courses_cap input"]),e(".cp-content-box.instructor",[this,".coursepress_instructors_cap input"]),e(".cp-content-box.student",[this,".coursepress_students_cap input"]),e(".cp-content-box.notification",[this,".coursepress_notifications_cap input"]),e(".cp-content-box.discussion",[this,".coursepress_discussions_cap input"]),e(".capability-list .coursepress_courses_cap",[this]),e(".capability-list .coursepress_instructors_cap",[this]),e(".capability-list .coursepress_students_cap",[this]),e(".capability-list .coursepress_assessment_cap",[this]),e(".capability-list .coursepress_reports_cap",[this]),e(".capability-list .coursepress_notifications_cap",[this]),e(".capability-list .coursepress_discussions_cap",[this]),e(".capability-list .coursepress_settings_cap",[this])}function s(){e(".cp-content-box.course",[this]),e(".cp-content-box.course-category",[this]),e(".cp-content-box.course-unit",[this])}function i(){e(".cp-content-box.instructor",[this])}function r(){e(".cp-content-box.student",[this])}function a(){e(".cp-content-box.notification",[this])}function n(){e(".cp-content-box.discussion",[this])}jQuery(".capability-list .coursepress_dashboard_cap input").on("click",t),jQuery(".capability-list .coursepress_courses_cap input").on("click",s),jQuery(".capability-list .coursepress_instructors_cap input").on("click",i),jQuery(".capability-list .coursepress_students_cap input").on("click",r),jQuery(".capability-list .coursepress_notifications_cap input").on("click",a),jQuery(".capability-list .coursepress_discussions_cap input").on("click",n)}()})(jQuery);