/*! CoursePress - v3.0.0
 * https://premium.wpmudev.org/project/coursepress-pro/
 * Copyright (c) 2017; * Licensed GPLv2+ */
!function(a){"use strict";a(document).ready(function(){a(document).on("change","#select_course_id",function(){a(this).closest("form").submit()}).on("click","#cp-search-clear",function(){var b=a("[name=s]",a(this).parent());""!==b.val()&&(b.val(""),a(this).closest("form").submit())})})}(jQuery),function(a){a(document).ready(function(){function b(a){if(console.log("a",a),a.loading)return a.text;var b='<div class="select2-result-course clearfix"><div class="select2-result-course__meta"><div class="select2-result-course__title">'+a.post_title+"</div>";return a.description&&(b+='<div class="select2-result-course__description">'+a.description+"</div>"),b+="</div></div>"}function c(b){var c={action:"coursepress_get_course_units",course_id:b.id,_wpnonce:a("#coursepress-notifications .option-unit_id select").data("nonce")};return jQuery.get(ajaxurl,c,function(b){var c=a("[name=unit_id]"),d='<option value="'+c.data("all-value")+'">'+c.data("all-label")+"</option>",e=parseInt(c.data("value"));c.empty(),a.each(b.data,function(a,b){d+='<option value="'+b.ID+'" data-key="'+a+'"',e===parseInt(b.ID)&&(d+=' selected="selected"'),d+=">"+b.post_title+"</option>"}),c.html(d)}),b.post_title||b.text}a("#coursepress-notifications .option-course_id .select2").select2({ajax:{url:ajaxurl,dataType:"json",delay:250,data:function(b){return{q:b.term,page:b.page,action:"coursepress_courses_search",_wpnonce:a(this).data("nonce")}},processResults:function(a,b){return b.page=b.page||1,{results:a.items,pagination:{more:30*b.page<a.total_count}}},cache:!0},escapeMarkup:function(a){return a},minimumInputLength:1,templateResult:b,templateSelection:c})})}(jQuery);