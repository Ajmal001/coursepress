/*! CoursePress - v3.0-beta
 * https://premium.wpmudev.org/project/coursepress-pro/
 * Copyright (c) 2017; * Licensed GPLv2+ */
var CoursePress=function(a,b,c){var d={};return d.Define=function(e,f){d[e]||(d[e]=f.call(null,a,b,c))},d}(jQuery,document,window);CoursePress.Define("Request",function(a,b,c){return Backbone.Model.extend({url:c.cpVars.ajaxurl+"?action=coursepress_request",defaults:{_wpnonce:c.cpVars._wpnonce},initialize:function(){this.on("error",this.serverError,this),Backbone.Model.prototype.initialize.apply(this,arguments)},parse:function(a){var b=this.get("action");a.success?this.trigger("coursepress:success_"+b,a.data):this.trigger("coursepress:error_"+b,a.data)},serverError:function(){}})}),CoursePress.Define("View",function(a,b,c){return _.mixin({isTrue:function(a,b){return _.isArray(b)?_.contains(b,a):_.isObject(b)?!!b[a]:a===b},checked:function(a,b){return _.isTrue(a,b)?'checked="checked"':""},selected:function(a,b){return _.isTrue(a,b)?'selected="selected"':""},_getTemplate:function(b,c){var d={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return _.template(a("#"+b).html(),null,d)(c)}}),Backbone.View.extend({template_id:!1,model:CoursePress.Request,initialize:function(){Backbone.View.prototype.initialize.apply(this,arguments),this.render()},render:function(){this.template_id&&this.$el.html(_._getTemplate(this.template_id,this.model.toJSON()))}})}),CoursePress.Define("Toggle",function(a){return CoursePress.View.extend({events:{change:"toggleStatus"},render:function(){this.$el.hide(),a('<span class="coursepress-toggle">YES</span>').insertAfter(this.$el)},toggleStatus:function(b){a(b.currentTarget).is(":checked")?this.trigger("toggle_active"):this.trigger("toggle_inactive")}})}),CoursePress.Define("StepsModal",function(a){return CoursePress.View.extend({steps:[],events:{"click .step":"toggleContent","click .step-back":"getPreviousStep","click .step-next":"getNextStep","click .step-cancel":"returnToMainPage"},render:function(){_.each(this.$(".step-list li"),this.getSteps,this),this.currentStep||(this.currentStep=_.first(this.steps)),this.firstStep=_.first(this.steps),this.lastStep=_.last(this.steps),this.prevButton=this.$(".step-back"),this.nextButton=this.$(".step-next")},getSteps:function(b){this.steps.push(a(b).data("step"))},toggleContent:function(b){var c=a(b.currentTarget),d=c.data("step");this.currentStep=d},getPreviousStep:function(){var a=_.indexOf(this.steps,this.currentStep);window.alert(a)},getNextStep:function(){this.currentStep!==this.firstStep&&this.prevButton.show()},returnToMainPage:function(){}})});